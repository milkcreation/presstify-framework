jQuery(document).ready(function(t){var e=0,a=!1,o=[],s=[];t(document).on("click",".tiFyTemplatesImport-RowImport",function(o){if(o.preventDefault(),!a){a=!0,notices=[],i();var s=t(this).closest("tr");e=1,r(s)}}),t(document).on("click",".tiFyTemplatesImport-submit",function(o){if(o.preventDefault(),!a){a=!0,notices=[],i();var s=AjaxListTable.page.info();e=s.recordsDisplay,t("#tiFyTemplatesImport-ProgressBar").tiFyProgress("option",{value:0,max:e,show:!0,info:'<span style="color:#2980b9;">'+tiFyTemplatesAdminImport.prepare+"</span>",close:function(e,o){o.infos('<span style="color:#f1c40f;">'+tiFyTemplatesAdminImport.cancel+"</span>"),a=!1,t(document).on("tiFyTemplatesImport.complete",function(){o.close()})}}),s.page?AjaxListTable.page(0).draw("page"):AjaxListTable.draw(!1),t(document).on("draw.dt.tiFyTemplatesImport",function(e,a,o,s){var i=t(AjaxListTable.row(":eq(0)",{page:"current"}).node());r(i),t(this).unbind("draw.dt.tiFyTemplatesImport")})}});var i=function(){t('form[name="tiFyTemplatesImport-optionsForm"]').length&&(s=t('form[name="tiFyTemplatesImport-optionsForm"]').serialize())};t(document).on("draw.dt.tiFyTemplatesImportAppendResponse",function(e,a,s,i){AjaxListTable.rows().every(function(e,a,s){!function(e){var a=AjaxListTable.cell(e[0],0),s=t(a.node()),i=t(".tiFyTemplatesImport-RowImport",s).data("item_index_value");if(void 0!==o[i]){var r=o[i];t(".tiFyTemplatesImport-Result",s).hide(),r.success?t(".tiFyTemplatesImport-Result--success",s).show():t(".tiFyTemplatesImport-Result--error",s).show(),t(".tiFyTemplatesImport-Notices",s).html(r.messages.join("")).addClass("tiFyTemplatesImport-Notices--filled")}}(t(this))})}),t(document).on("mouseenter mouseleave",".tiFyTemplatesImport-RowImport",function(e){var a=t(this).closest("td");"mouseenter"===e.type?t(".tiFyTemplatesImport-Notices--filled",a).show():t(".tiFyTemplatesImport-Notices--filled",a).hide()});var r=function(i){if(e&&a){var n=t(".tiFyTemplatesImport-RowImport",i).data("item_index_key"),p=t(".tiFyTemplatesImport-RowImport",i).data("item_index_value"),m=!!i.is(":last-child"),l={};l[n]=p,(import_data=JSON.parse(decodeURIComponent(t("#ajaxImportData").val())))&&(l=t.extend(l,import_data)),(datatables_data=JSON.parse(decodeURIComponent(t("#ajaxDatatablesData").val())))&&(l=t.extend(l,datatables_data)),s&&(l=t.extend(l,{__import_options:s})),i.addClass("active"),t("td",i).each(function(){t(this).append('<div class="tdOverlay"/>')}),t.ajax({url:tify_ajaxurl,type:"POST",data:l,dataType:"json",success:function(s,n,l){var d=[];if(t.each(s.notices,function(e,a){t.each(a,function(t,a){a.message&&d.push('<span style="color:'+tiFyTemplatesAdminImport.notices[e].color+';display:block;">'+a.message+"</span>")})}),t("#tiFyTemplatesImport-ProgressBar").tiFyProgress("infos",d.join("")),t("#tiFyTemplatesImport-ProgressBar").tiFyProgress("increase"),o[p]={success:s.success,messages:d},!--e)return AjaxListTable.draw("page"),void t(document).on("draw.dt.tiFyTemplatesImport",function(e,o,s,i){t("#tiFyTemplatesImport-ProgressBar").tiFyProgress("close"),a=!1,r(0),t(this).unbind("draw.dt.tiFyTemplatesImport")});if(m){c=0;AjaxListTable.page("next").draw("page")}else{var c=i.next().index();AjaxListTable.draw("page")}t(document).on("draw.dt.tiFyTemplatesImport",function(e,a,o,s){var i=t(AjaxListTable.row(":eq("+c+")",{page:"current"}).node());r(i),t(this).unbind("draw.dt.tiFyTemplatesImport")})}})}else t(document).trigger("tiFyTemplatesImport.complete")}});