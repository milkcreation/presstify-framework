!function(e,t,r,i){"use strict";function s(t,r){this.$el=e(t),this.$viewer=e(".viewer",this.$el),this.$roller=e(".roller",this.$el),this.dir="next",this.$el.data(n,this);this.$el.data(n+"-opts");this.defaults={autoscroll:!0,delay:3e3,easing:"easeInOutExpo",transition:"slideLeft",behavior:"cycle",speed:500,bypage:1,bystep:1,responsive:!0,stop_hover:!0,before:function(e,t,r){return!1},after:function(e,t,r){return!1},beforeInit:function(){return!1},afterInit:function(){return!1},resize:function(e,t){return!1}};var s={};e.each(this.defaults,function(r,n){var a=e(t).data(r);s[r]=a!=i?a:n}),this.defaults=s,this.o=e.extend(!0,this.defaults,r),this.init()}var n="milk-slideshow",a={init:function(e){return this.each(function(t,r){new s(this,e)})}};e.fn.milkSlideshow=function(t){return a[t]?a[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("La methode "+t+" n'existe pas pour jQuery.milkSlideshow"):a.init.apply(this,arguments)},s.prototype={init:function(){e("> li",this.$roller).each(function(t,r){e(this).attr("data-index",t)}),this._style(),this.$current=e("> li:eq(0)",this.$roller),this.currentIndex=0,this._setCurrent(),this.$viewer.scrollLeft(0),this.gap=1,this.o.beforeInit(),e("> li",this.$roller).length<=this.o.bypage?e(".nav",this.$el).hide():(this._listen(),this.o.autoscroll&&this._auto(),this.o.afterInit())},_style:function(){var t=this;switch(t.o.transition){case"slideLeft":t.$el.css("position","relative"),t.$roller.css({width:"99999em",margin:0,padding:0,"list-style-type":"none"}),e("> li",t.$roller).each(function(){e(this).css({float:"left"}),e(this).css({width:t.$el.width()/t.o.bypage+"px"})})}},_auto:function(){var t=this;t.timeout=setInterval(function(){t.autoscroll=!0,t.dir=e(this).hasClass("prev")?"prev":"next",t.$current=e("> li.current",t.$roller),"prev"===t.dir?t.$current.is(":first-child")?t.$target=e("> li:last",t.$roller):t.$target=t.$current.prev():t.$current.is(":last-child")?t.$target=e("> li:first",t.$roller):t.$target=t.$current.next(),t.targetIndex=t.$target.data("index"),t._slide()},t.o.delay)},_listen:function(){var e=this;e.o.autoscroll&&(e.o.stop_hover?e.$el.hover(function(t){e.autoscroll=!1,clearTimeout(e.timeout)},function(){e._auto()}):e._auto()),e._nav(),jQuery().swipe&&e._swipe(),e.o.responsive&&e._resize()},_preloadImg:function(){var t=this,r=t.$target.data("src");r&&e("<img />").load(r,function(){e(".item-image",$target).attr("style","background-image:url("+r+");"),t._transition($target,dir)})},_nav:function(){var t=this;e(".nav",t.$el).click(function(r){if(r.preventDefault(),t.$viewer.is(":animated"))return!1;t.dir=e(this).hasClass("prev")?"prev":"next",t._slide()}),e(".tabs > li > a",t.$el).click(function(r){if(r.preventDefault(),t.$viewer.is(":animated"))return!1;var i=e(this).closest("li").index();e(".tabs > li.current").index()>i?t.dir="prev":t.dir="next",t.$target=e("> li[data-index='"+e(this).closest("li").index()+"']",t.$roller),t._slide()}),e("a[data-milkslideshow-slide]").click(function(r){if(r.preventDefault(),t.$viewer.is(":animated"))return!1;t.$target=e("> li[data-index='"+parseInt(e(this).data("milkslideshow-slide")-1)+"']",t.$roller),t._slide()})},_slide:function(){var t=this;t.$current=e("> li.current",t.$roller),t.$target||("prev"===t.dir?t.$current.is(":first-child")?t.$target=e("> li:last",t.$roller):t.$target=t.$current.prev():t.$current.is(":last-child")?t.$target=e("> li:first",t.$roller):t.$target=t.$current.next());var r=t.$roller.position().left,i=t.$target.position().left;switch(t.targetIndex=t.$target.data("index"),t.gap=t.targetIndex-t.currentIndex,t.o.transition){case"slideLeft":if("prev"===t.dir){e("> li",t.$roller).slice(0,t.gap).each(function(){e(this).appendTo(t.$roller)});var s=t.gap<0?-t.gap:1;t.o.before(t.dir,t.$target,t),t.$viewer.scrollLeft(t.$target.outerWidth()*s),t.$viewer.stop().animate({scrollLeft:0},t.o.speed,t.o.easing,function(){t.o.after(t.dir,t.$target,t),t.$current=t.$target,t._setCurrent(),t._reset()})}else t.o.before(t.dir,t.$target,t),t.$viewer.stop().animate({scrollLeft:i-r},t.o.speed,t.o.easing,function(){t.o.after(t.dir,t.$target,t),t.$current=t.$target,t._setCurrent(),e("> li",t.$roller).slice(0,t.gap).each(function(){e(this).appendTo(t.$roller)}),t._reset()});break;case"fadeIn":if("prev"===t.dir){for(var n=0;n<-gap;n++)e("> li:last",t.$roller).prependTo(t.$roller);t.o.before(t.dir,t.$target,t),t.$target.hide(),t.$current.fadeOut(function(){t.o.after(t.dir,t.$target,t),t.$current=t.$target,t._setCurrent(),t._reset()})}else t.o.before(t.dir,t.$target,t),t.$target.hide(),t.$current.fadeOut(function(){t.$target.fadeIn(),t.o.after(t.dir,t.$target,t),t.$current=t.$target,t._setCurrent(),e("> li",t.$roller).slice(0,gap).each(function(){e(this).appendTo(t.$roller)}),t._reset()})}},_swipe:function(){this.$viewer.swipe({triggerOnTouchEnd:!0,swipeStatus:this._onSwipe,allowPageScroll:"horizontal",threshold:75})},_onSwipe:function(e,t,r,i){},_setCurrent:function(){this.$current.addClass("current").siblings().removeClass("current"),this.currentIndex=this.$current.data("index"),e(".tabs > li:eq("+this.currentIndex+")",this.$el).addClass("current").siblings().removeClass("current"),e('li[data-milkslideshow="tabindex"]:eq('+this.currentIndex+")").addClass("current").siblings().removeClass("current")},_reset:function(){this.$target=i,this.$viewer.scrollLeft(0)},_resize:function(){var t=this;e(window).resize(function(){t.o.resize(t.$current,t),e("> li",t.$roller).css("width",t.$viewer.width()/t.o.bypage+"px");var r=t.$roller.position().left,i=t.$current.position().left;t.$viewer.scrollLeft(i-r)}).trigger("resize")}}}(jQuery,document,window,void 0);