jQuery(document).ready(function(t){var e=0,a=!1;t(document).on("click",".tiFyTemplatesImport-RowImport",function(o){if(o.preventDefault(),!a){a=!0;var r=t(this).closest("tr");e=1,s(r)}}),t(document).on("click",".tiFyTemplatesImport-submit",function(o){if(o.preventDefault(),!a){a=!0;var r=AjaxListTable.page.info();e=r.recordsDisplay,t("#tiFyTemplatesImport-ProgressBar").tiFyProgress("option",{value:0,max:e,show:!0,info:'<span style="color:#2980b9;">'+tiFyTemplatesAdminImport.prepare+"</span>",close:function(e,s){s.infos('<span style="color:#f1c40f;">'+tiFyTemplatesAdminImport.cancel+"</span>"),a=!1,t(document).on("tiFyTemplatesImport.complete",function(){s.close()})}}),r.page?AjaxListTable.page(0).draw("page"):AjaxListTable.draw(!1),t(document).on("draw.dt.tiFyTemplatesImport",function(e,a,o,r){var i=t(AjaxListTable.row(":eq(0)",{page:"current"}).node());s(i),t(this).unbind("draw.dt.tiFyTemplatesImport")})}});var s=function(o){if(e&&a){var r=t(".tiFyTemplatesImport-RowImport",o).data("item_index_key"),i=t(".tiFyTemplatesImport-RowImport",o).data("item_index_value"),n=!!o.is(":last-child"),p={};p[r]=i,(import_data=JSON.parse(decodeURIComponent(t("#ajaxImportData").val())))&&(p=t.extend(p,import_data)),(datatables_data=JSON.parse(decodeURIComponent(t("#ajaxDatatablesData").val())))&&(p=t.extend(p,datatables_data)),o.addClass("active"),t("td",o).each(function(){t(this).append('<div class="tdOverlay"/>')}),t.ajax({url:tify_ajaxurl,type:"POST",data:p,dataType:"json",success:function(r,i,p){if(r.success?a&&t("#tiFyTemplatesImport-ProgressBar").tiFyProgress("infos",'<span style="color:#1abc9c;">'+r.data.message+"</span>"):t("#tiFyTemplatesImport-ProgressBar").tiFyProgress("infos",'<span style="color:#c0392b;">'+r.data.message+"</span>"),t("#tiFyTemplatesImport-ProgressBar").tiFyProgress("increase"),!--e)return AjaxListTable.draw("page"),void t(document).on("draw.dt.tiFyTemplatesImport",function(e,o,r,i){t("#tiFyTemplatesImport-ProgressBar").tiFyProgress("close"),a=!1,s(0),t(this).unbind("draw.dt.tiFyTemplatesImport")});if(n){m=0;AjaxListTable.page("next").draw("page")}else{var m=o.next().index();AjaxListTable.draw("page")}t(document).on("draw.dt.tiFyTemplatesImport",function(e,a,o,r){var i=t(AjaxListTable.row(":eq("+m+")",{page:"current"}).node());s(i),t(this).unbind("draw.dt.tiFyTemplatesImport")})}})}else t(document).trigger("tiFyTemplatesImport.complete")}});