!function(t){t.widget("tify.tiFyControlCurtainMenu",{options:{},_create:function(){this.el=this.element,this.level=0,this.levels=t(".tiFyControlCurtainMenu-panel",this.el),this.levelBacks=t('[data-toggle="curtain_menu-back"]',this.el),this.levels.each(function(){var e=t(this).parents(".tiFyControlCurtainMenu-panel").length+1;t(this).attr("data-level",e)}),this.menuItems=t("li",this.el),this._initEvents()},_initEvents:function(){self=this,this.menuItems.each(function(e,n){var l=t("> .tiFyControlCurtainMenu-panel",n);l.length&&t("> a",n).on("click",function(e){e.preventDefault();var n=t(this).closest(".tiFyControlCurtainMenu-panel").attr("data-level");self.level<=n&&(e.stopPropagation(),self._openMenu(l))})}),this.levelBacks.each(function(e,n){var l=t(n).closest(".tiFyControlCurtainMenu-panel");l.length&&t(n).on("click",function(t){t.preventDefault();var e=l.attr("data-level");self.level<=e&&(t.stopPropagation(),self._closeMenu(l))})})},_openMenu:function(t){++this.level,t.addClass("tiFyControlCurtainMenu-panel--open");var e=t.closest("li").closest(".tiFyControlCurtainMenu-panel");e.length&&e.addClass("tiFyControlCurtainMenu-panel--pushed").scrollTop(0)},_closeMenu:function(t){--this.level,t.removeClass("tiFyControlCurtainMenu-panel--open");var e=t.closest("li").closest(".tiFyControlCurtainMenu-panel");e.length&&e.removeClass("tiFyControlCurtainMenu-panel--pushed")}}),t('[data-tify_control="curtain_menu"]').tiFyControlCurtainMenu()}(jQuery);