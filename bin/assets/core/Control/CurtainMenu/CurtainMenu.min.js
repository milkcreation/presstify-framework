!function(i,t,e){i.widget("tify.tiFyControlCurtainMenu",{options:{},_create:function(){this.el=this.element,this.level=0,this.levels=i(".tiFyControlCurtainMenu-panel",this.el),this.levelBacks=i('[data-toggle="curtain_menu-back"]',this.el),this.levels.each(function(){var t=i(this).parents(".tiFyControlCurtainMenu-panel").length+1;i(this).attr("data-level",t)}),this.menuItems=i("li",this.el),this._initEvents()},_initEvents:function(){var l=this;this.menuItems.each(function(t,e){var n=i("> .tiFyControlCurtainMenu-panel",e);n.length&&i("> a",e).on("click",function(t){t.preventDefault();var e=i(this).closest(".tiFyControlCurtainMenu-panel").attr("data-level");l.level<=e&&(t.stopPropagation(),l._openMenu(n))})}),this.levelBacks.each(function(t,e){var n=i(e).closest(".tiFyControlCurtainMenu-panel");n.length&&i(e).on("click",function(t){t.preventDefault();var e=n.attr("data-level");l.level<=e&&(t.stopPropagation(),l._closeMenu(n))})})},_openMenu:function(t){++this.level,t.addClass("tiFyControlCurtainMenu-panel--open");var e=t.closest("li").closest(".tiFyControlCurtainMenu-panel");e.length&&e.scrollTop(0)},_closeMenu:function(t){--this.level,t.removeClass("tiFyControlCurtainMenu-panel--open");t.closest("li").closest(".tiFyControlCurtainMenu-panel")}}),i('[data-tify_control="curtain_menu"]').tiFyControlCurtainMenu()}(jQuery,document,window);