!function(r,e,t,n){"use strict";var i="milk-onepage-scroll",o={init:function(i){return this.each(function(e,t){new a(this,i)})}};function a(e,t){this.$el=r(e),this.$target,this.$el.data(i,this);this.$el.data(i+"-opts");this.defaults={easing:"swing",speed:300,"max-width":0,cycle:!1,scroller:"",before:function(e,t){return!1},after:function(e,t){return!1}},this.o=r.extend(!0,this.defaults,t),this.init()}r.fn.milkOnePageScroll=function(e){return o[e]?o[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void r.error("La methode "+e+" n'existe pas pour jQuery.milkOnePageScroll"):o.init.apply(this,arguments)},a.prototype={init:function(){var e=this;r("section.active",e.$el).length||(e.$target=r("section:first",e.$el).addClass("active")),e._listen()},_listen:function(){var e=this;e._nav(),e._mouseWheel(),e._resize()},_nav:function(){var e,i=this;if((e=document.URL.split("#"))&&e[1]!=n){var t="#"+e[1];i.$target=r(t),i._scrollTo()}r(document).on("click.onepagescroll.target","a[data-pagescroll='target']",function(e){if(e.preventDefault(),i.$el.is(":animated"))return!1;var t=r(this).attr("href");return!r(t).hasClass("active")&&(i.$target=r(t),!!i.$target.length&&(i.o.before(i.$target,i),void i._scrollTo()))}),r(document).on("click.onepagescroll.prev","a[data-pagescroll='prev']",function(e){e.preventDefault(),i._prev()}),r(document).on("click.onepagescroll.next","a[data-pagescroll='next']",function(e){e.preventDefault(),i._next()})},_scrollTo:function(){var e=this,t=e.$target.index(),i=r("section.active",e.$el).index(),n=Math.abs(i-t),o=Math.abs(e.o.speed*n),a=e.$target.height()*t;r("section",e.$el).removeClass("active"),e.$el.stop().animate({marginTop:-a+"px"},o,e.o.easing,function(){e.$target.addClass("active"),e.o.after(e.$target,e)})},_prev:function(){var e=this;if(e.$el.is(":animated"))return!1;if(r("section.active",e.$el).length)if(r("section.active",e.$el).is(":first-child")){if(!e.o.cycle)return!1;e.$target=r("section:last")}else e.$target=r("section.active").prev();else{if(!e.o.cycle)return!1;e.$target=r("section:last")}e.o.before(e.$target,e),e._scrollTo()},_next:function(){var e=this;if(e.$el.is(":animated"))return!1;if(r("section.active",e.$el).length)if(r("section.active",e.$el).is(":last-child")){if(!e.o.cycle)return!1;e.$target=r("section:first")}else e.$target=r("section.active").next();else{if(!e.o.cycle)return!1;e.$target=r("section:first")}e.o.before(e.$target,e),e._scrollTo()},_mouseWheel:function(){var o=this;r(document).on("mousewheel.onepagescroll",o.el,function(e,t,i,n){0<t?o._prev():o._next()})},_resize:function(){var t=this;r(window).resize(function(e){r("section.active",t.$el).length&&t.$el.css({"margin-top":-r("section.active",t.$el).position().top+"px"})})}}}(jQuery,document,window,void 0);