!function(h,m,i,t){"use strict";var r=function(){var t;return""==(t=(t=i.body||i.documentElement).style).WebkitTransition?"-webkit-":""==t.MozTransition?"-moz-":""==t.OTransition?"-o-":""==t.transition&&""},v=!1!==r(),x=function(t,n,e){var i={},o=r();i[o+"transform"]="translateX("+n+")",i[o+"transition"]=o+"transform "+e+"s linear",t.css(i)},E="ontouchstart"in m,S=m.navigator.pointerEnabled||m.navigator.msPointerEnabled,y=function(t){if(E)return!0;if(!S||void 0===t||void 0===t.pointerType)return!1;if(void 0!==t.MSPOINTER_TYPE_MOUSE){if(t.MSPOINTER_TYPE_MOUSE!=t.pointerType)return!0}else if("mouse"!=t.pointerType)return!0;return!1};h.fn.imageLightbox=function(r){r=h.extend({selector:'id="imagelightbox"',allowedTypes:"png|jpg|jpeg|gif",animationSpeed:250,preloadNext:!0,enableKeyboard:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,onStart:!1,onEnd:!1,onLoadStart:!1,onLoadEnd:!1},r);var a=h([]),u=h(),c=h(),l=0,o=0,f=0,d=!1,n=function(t){return"a"==h(t).prop("tagName").toLowerCase()&&new RegExp(".("+r.allowedTypes+")$","i").test(h(t).attr("href"))},p=function(){if(!c.length)return!0;var n=.8*h(m).width(),e=.7*h(m).height(),i=new Image;i.src=c.attr("src"),i.onload=function(){if(l=i.width,o=i.height,n<l||e<o){var t=n/e<l/o?l/n:o/e;l/=t,o/=t}c.css({width:l+"px",height:o+"px",top:(h(m).height()-o)/2+"px",left:(h(m).width()-l)/2+"px"})}},s=function(o){if(d)return!1;if(o=void 0!==o&&("left"==o?1:-1),c.length){if(!1!==o&&(a.length<2||!0===r.quitOnEnd&&(-1===o&&0==a.index(u)||1===o&&a.index(u)==a.length-1)))return g(),!1;var t={opacity:0};v?x(c,100*o-f+"px",r.animationSpeed/1e3):t.left=parseInt(c.css("left"))+100*o+"px",c.animate(t,r.animationSpeed,function(){e()}),f=0}!(d=!0)!==r.onLoadStart&&r.onLoadStart(),setTimeout(function(){c=h("<img "+r.selector+" />").attr("src",u.attr("href")).load(function(){c.appendTo("body"),p();var t={opacity:1};if(c.css("opacity",0),v)x(c,-100*o+"px",0),setTimeout(function(){x(c,"0px",r.animationSpeed/1e3)},50);else{var n=parseInt(c.css("left"));t.left=n+"px",c.css("left",n-100*o+"px")}if(c.animate(t,r.animationSpeed,function(){(d=!1)!==r.onLoadEnd&&r.onLoadEnd()}),r.preloadNext){var e=a.eq(a.index(u)+1);e.length||(e=a.eq(0)),h("<img />").attr("src",e.attr("href")).load()}}).error(function(){!1!==r.onLoadEnd&&r.onLoadEnd()});var n=0,e=0,i=0;c.on(S?"pointerup MSPointerUp":"click",function(t){if(t.preventDefault(),r.quitOnImgClick)return g(),!1;if(y(t.originalEvent))return!0;var n=(t.pageX||t.originalEvent.pageX)-t.target.offsetLeft;(u=a.eq(a.index(u)-(n<l/2?1:-1))).length||(u=a.eq(n<l/2?a.length:0)),s(n<l/2?"left":"right")}).on("touchstart pointerdown MSPointerDown",function(t){if(!y(t.originalEvent)||r.quitOnImgClick)return!0;v&&(i=parseInt(c.css("left"))),n=t.originalEvent.pageX||t.originalEvent.touches[0].pageX}).on("touchmove pointermove MSPointerMove",function(t){if(!y(t.originalEvent)||r.quitOnImgClick)return!0;t.preventDefault(),e=t.originalEvent.pageX||t.originalEvent.touches[0].pageX,f=n-e,v?x(c,-f+"px",0):c.css("left",i-f+"px")}).on("touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",function(t){if(!y(t.originalEvent)||r.quitOnImgClick)return!0;50<Math.abs(f)?((u=a.eq(a.index(u)-(f<0?1:-1))).length||(u=a.eq(f<0?a.length:0)),s(0<f?"right":"left")):v?x(c,"0px",r.animationSpeed/1e3):c.animate({left:i+"px"},r.animationSpeed/2)})},r.animationSpeed+100)},e=function(){if(!c.length)return!1;c.remove(),c=h()},g=function(){if(!c.length)return!1;c.animate({opacity:0},r.animationSpeed,function(){e(),(d=!1)!==r.onEnd&&r.onEnd()})};return h(m).on("resize",p),r.quitOnDocClick&&h(i).on(E?"touchend":"click",function(t){c.length&&!h(t.target).is(c)&&g()}),r.enableKeyboard&&h(i).on("keyup",function(t){if(!c.length)return!0;t.preventDefault(),27==t.keyCode&&g(),37!=t.keyCode&&39!=t.keyCode||((u=a.eq(a.index(u)-(37==t.keyCode?1:-1))).length||(u=a.eq(37==t.keyCode?a.length:0)),s(37==t.keyCode?"left":"right"))}),h(i).on("click",this.selector,function(t){return!n(this)||(t.preventDefault(),!d&&((d=!1)!==r.onStart&&r.onStart(),u=h(this),void s()))}),this.each(function(){if(!n(this))return!0;a=a.add(h(this))}),this.switchImageLightbox=function(t){var n=a.eq(t);if(n.length){var e=a.index(u);u=n,s(t<e?"left":"right")}return this},this.quitImageLightbox=function(){return g(),this},this}}(jQuery,window,document);