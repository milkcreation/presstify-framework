!function(s,e,t,a){"use strict";var r="milk-slideshow",i={init:function(r){return this.each(function(e,t){new n(this,r)})}};function n(i,e){this.$el=s(i),this.$viewer=s(".viewer",this.$el),this.$roller=s(".roller",this.$el),this.dir="next",this.$el.data(r,this);this.$el.data(r+"-opts");this.defaults={autoscroll:!0,delay:3e3,easing:"easeInOutExpo",transition:"slideLeft",behavior:"cycle",speed:500,bypage:1,bystep:1,responsive:!0,stop_hover:!0,before:function(e,t,r){return!1},after:function(e,t,r){return!1},beforeInit:function(){return!1},afterInit:function(){return!1},resize:function(e,t){return!1}};var n={};s.each(this.defaults,function(e,t){var r=s(i).data(e);n[e]=r!=a?r:t}),this.defaults=n,this.o=s.extend(!0,this.defaults,e),this.init()}s.fn.milkSlideshow=function(e){return i[e]?i[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void s.error("La methode "+e+" n'existe pas pour jQuery.milkSlideshow"):i.init.apply(this,arguments)},n.prototype={init:function(){var e=this;s("> li",e.$roller).each(function(e,t){s(this).attr("data-index",e)}),e._style(),e.$current=s("> li:eq(0)",e.$roller),e.currentIndex=0,e._setCurrent(),e.$viewer.scrollLeft(0),e.gap=1,e.o.beforeInit(),s("> li",e.$roller).length<=e.o.bypage?s(".nav",e.$el).hide():(e._listen(),e.o.autoscroll&&e._auto(),e.o.afterInit())},_style:function(){var e=this;switch(e.o.transition){case"slideLeft":e.$el.css("position","relative"),e.$roller.css({width:"99999em",margin:0,padding:0,"list-style-type":"none"}),s("> li",e.$roller).each(function(){s(this).css({float:"left"}),s(this).css({width:e.$el.width()/e.o.bypage+"px"})})}},_auto:function(){var e=this;e.timeout=setInterval(function(){e.autoscroll=!0,e.dir=s(this).hasClass("prev")?"prev":"next",e.$current=s("> li.current",e.$roller),"prev"===e.dir?e.$current.is(":first-child")?e.$target=s("> li:last",e.$roller):e.$target=e.$current.prev():e.$current.is(":last-child")?e.$target=s("> li:first",e.$roller):e.$target=e.$current.next(),e.targetIndex=e.$target.data("index"),e._slide()},e.o.delay)},_listen:function(){var t=this;t.o.autoscroll&&(t.o.stop_hover?t.$el.hover(function(e){t.autoscroll=!1,clearTimeout(t.timeout)},function(){t._auto()}):t._auto()),t._nav(),jQuery().swipe&&t._swipe(),t.o.responsive&&t._resize()},_preloadImg:function(){var e=this,t=e.$target.data("src");t&&s("<img />").load(t,function(){s(".item-image",$target).attr("style","background-image:url("+t+");"),e._transition($target,dir)})},_nav:function(){var r=this;s(".nav",r.$el).click(function(e){if(e.preventDefault(),r.$viewer.is(":animated"))return!1;r.dir=s(this).hasClass("prev")?"prev":"next",r._slide()}),s(".tabs > li > a",r.$el).click(function(e){if(e.preventDefault(),r.$viewer.is(":animated"))return!1;var t=s(this).closest("li").index();s(".tabs > li.current").index()>t?r.dir="prev":r.dir="next",r.$target=s("> li[data-index='"+s(this).closest("li").index()+"']",r.$roller),r._slide()}),s("a[data-milkslideshow-slide]").click(function(e){if(e.preventDefault(),r.$viewer.is(":animated"))return!1;r.$target=s("> li[data-index='"+parseInt(s(this).data("milkslideshow-slide")-1)+"']",r.$roller),r._slide()})},_slide:function(){var e=this;e.$current=s("> li.current",e.$roller),e.$target||("prev"===e.dir?e.$current.is(":first-child")?e.$target=s("> li:last",e.$roller):e.$target=e.$current.prev():e.$current.is(":last-child")?e.$target=s("> li:first",e.$roller):e.$target=e.$current.next());var t=e.$roller.position().left,r=e.$target.position().left;switch(e.targetIndex=e.$target.data("index"),e.gap=e.targetIndex-e.currentIndex,e.o.transition){case"slideLeft":if("prev"===e.dir){s("> li",e.$roller).slice(0,e.gap).each(function(){s(this).appendTo(e.$roller)});var i=e.gap<0?-e.gap:1;e.o.before(e.dir,e.$target,e),e.$viewer.scrollLeft(e.$target.outerWidth()*i),e.$viewer.stop().animate({scrollLeft:0},e.o.speed,e.o.easing,function(){e.o.after(e.dir,e.$target,e),e.$current=e.$target,e._setCurrent(),e._reset()})}else e.o.before(e.dir,e.$target,e),e.$viewer.stop().animate({scrollLeft:r-t},e.o.speed,e.o.easing,function(){e.o.after(e.dir,e.$target,e),e.$current=e.$target,e._setCurrent(),s("> li",e.$roller).slice(0,e.gap).each(function(){s(this).appendTo(e.$roller)}),e._reset()});break;case"fadeIn":if("prev"===e.dir){for(var n=0;n<-gap;n++)s("> li:last",e.$roller).prependTo(e.$roller);e.o.before(e.dir,e.$target,e),e.$target.hide(),e.$current.fadeOut(function(){e.o.after(e.dir,e.$target,e),e.$current=e.$target,e._setCurrent(),e._reset()})}else e.o.before(e.dir,e.$target,e),e.$target.hide(),e.$current.fadeOut(function(){e.$target.fadeIn(),e.o.after(e.dir,e.$target,e),e.$current=e.$target,e._setCurrent(),s("> li",e.$roller).slice(0,gap).each(function(){s(this).appendTo(e.$roller)}),e._reset()})}},_swipe:function(){this.$viewer.swipe({triggerOnTouchEnd:!0,swipeStatus:this._onSwipe,allowPageScroll:"horizontal",threshold:75})},_onSwipe:function(e,t,r,i){},_setCurrent:function(){var e=this;e.$current.addClass("current").siblings().removeClass("current"),e.currentIndex=e.$current.data("index"),s(".tabs > li:eq("+e.currentIndex+")",e.$el).addClass("current").siblings().removeClass("current"),s('li[data-milkslideshow="tabindex"]:eq('+e.currentIndex+")").addClass("current").siblings().removeClass("current")},_reset:function(){this.$target=a,this.$viewer.scrollLeft(0)},_resize:function(){var r=this;s(window).resize(function(){r.o.resize(r.$current,r),s("> li",r.$roller).css("width",r.$viewer.width()/r.o.bypage+"px");var e=r.$roller.position().left,t=r.$current.position().left;r.$viewer.scrollLeft(t-e)}).trigger("resize")}}}(jQuery,document,window,void 0);